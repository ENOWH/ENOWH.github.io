---
title: "Chapter06_VI"
excerpt: "Chapter05. System Programming"

categories:
  - SystemProgramming
tags:
  - [SystemProgramming]

permalink: /categories/SystemProgramming/Chapter06_VI

toc: true
toc_sticky: true

date: 2025-04-26
last_modified_at: 2025-04-26
---

# Chapter 8: 리눅스 VI 편집기

## 1. 리눅스 문서 편집 개요
- 1-1. 리눅스 편집기 종류
- 1-2. 행 단위 편집기 (ed, ex, sed)
- 1-3. 화면 단위 편집기 (vi, emacs)

## 2. VI 편집기 개요
- 2-1. VI 편집기란
- 2-2. 모드형 편집기 (입력 모드 vs 명령 모드)
- 2-3. VI 기본 탑재 및 특징

## 3. VI 사용법
- 3-1. VI 시작과 종료
- 3-2. 파일 저장 및 종료 명령어
- 3-3. 입력 모드로 전환 (i, a, o 명령)
- 3-4. 명령 모드로 전환 (ESC)

## 4. 커서와 화면 이동
- 4-1. 커서 이동 명령어 (h, j, k, l, w, b, e 등)
- 4-2. 화면 이동 (Page Up/Down, G 명령)
- 4-3. 특정 행 이동

## 5. 텍스트 수정
- 5-1. 한 글자 수정 (r)
- 5-2. 단어 수정 (cw, s)
- 5-3. 행 단위 수정 (C, cc)

## 6. 내용 삭제
- 6-1. 글자 삭제 (x, nx)
- 6-2. 단어 삭제 (dw)
- 6-3. 행 삭제 (dd)

## 7. 명령 취소
- 7-1. u (Undo) 단일 명령 취소
- 7-2. U (행 전체 복구)

## 8. 복사 및 붙여넣기
- 8-1. 복사 (yy, nyy)
- 8-2. 잘라내기 (dd)
- 8-3. 붙여넣기 (p, P)
- 8-4. 네임드 버퍼 사용 ("a, "b 등)
- 8-5. 마지막 행 모드에서 복사/붙이기 (:y, :d, :pu)

## 9. 검색 및 바꾸기
- 9-1. 문자열 검색 (/, ?)
- 9-2. 문자열 바꾸기 (:s/old/new/, :%s/old/new/g)

## 10. 기타 유용한 명령어
- 10-1. 다른 파일 읽어오기 (:r 파일명)
- 10-2. 다른 파일 편집 (:e 파일명)
- 10-3. 셸 명령어 실행 (:! 명령어)
- 10-4. 화면 다시 출력 (Ctrl+l)
- 10-5. 행 연결 (J)
- 10-6. 마지막 명령 반복 (.)
- 10-7. 대소문자 전환 (~)

## 11. VI 환경 설정
- 11-1. 행 번호 표시 (:set nu)
- 11-2. 특수문자 표시 (:set list)
- 11-3. 현재 설정 보기 (:set, :set all)
- 11-4. .exrc 파일을 통한 설정
- 11-5. EXINIT 환경변수 설정

## 12. VI 실습 예제
- 12-1. 기본 폴더 및 파일 생성
- 12-2. 입력/수정/삭제 실습
- 12-3. 복사/붙이기/검색/바꾸기 실습
- 12-4. 기타 명령어 실습


---


# Chapter 8: 리눅스 VI 편집기

## 1. 리눅스 문서 편집 개요

### 1-1. 리눅스 편집기 종류
- **리눅스는 텍스트 기반 운영체제**이기 때문에 문서 편집이 매우 중요함.
- **주요 편집기 종류**:
  - **gedit**: GNOME 환경에서 사용하는 GUI 기반 편집기.
  - **ed**: 유닉스 초기의 행 단위 편집기 (거의 사용하지 않음).
  - **ex**: 행 단위 편집기로, 주로 vi 내부에서 활용.
  - **sed**: 스트림 편집기로 파일 내용을 명령어 기반으로 일괄 수정.

### 1-2. 화면 단위 편집기
- **vi**: 가장 기본적인 리눅스 화면 편집기. 기본 탑재.
- **emacs**:
  - 매우 다양한 기능 제공.
  - 복잡하여 숙련된 사용자 위주로 사용.

---

## 2. VI 편집기 개요

### 2-1. VI 편집기란
- **Visual Editor**의 약자에서 유래.
- 1967년 **빌 조이(Bill Joy)**가 BSD 릴리즈에 포함하기 위해 제작.
- **줄 단위**가 아닌 **화면 단위**로 편집.

### 2-2. 모드형 편집기
- **입력 모드**: 텍스트 입력.
- **명령 모드**: 텍스트 수정, 복사, 삭제 등 편집 명령 실행.
- 같은 키라도 **모드에 따라 동작이 달라짐**.

> 💡 Vi는 **모드형 편집기**  
> 워드프로세서(한글, Word)는 **비모드형 편집기**.

### 2-3. VI 기본 탑재 및 특징
- 우분투, 데비안, CentOS, Tiny Linux, Embedded Linux, Mint 등 거의 모든 리눅스에 기본 탑재.
- 초반에는 낯설 수 있으나, 익숙해지면 매우 빠르고 강력한 편집 가능.

---

## 3. VI 사용법

### 3-1. VI 시작과 종료
- vi [파일명]: 해당 파일 열기 (없으면 새 파일 생성).
- vi: 파일 없이 빈 화면 열기.

### 3-2. 파일 저장 및 종료 명령어
- 저장 후 종료: `:wq`
- 강제 저장 후 종료: `:wq!`
- 저장 없이 종료: `:q!`
- 단축키 종료: `Shift + ZZ`

### 3-3. 입력 모드로 전환
- **i**: 현재 커서 위치 앞에서 입력.
- **a**: 현재 커서 위치 뒤에서 입력.
- **o**: 커서 아래 새 줄 생성 후 입력.

### 3-4. 명령 모드로 전환
- 입력 모드에서 `Esc` 키를 눌러 명령 모드로 전환.

---

## 4. 커서와 화면 이동

### 4-1. 커서 이동 명령어
- `h`: 왼쪽 이동
- `l`: 오른쪽 이동
- `j`: 아래 이동
- `k`: 위로 이동
- `w`: 다음 단어 첫 글자로 이동
- `b`: 이전 단어 첫 글자로 이동
- `e`: 현재 또는 다음 단어의 끝 글자로 이동
- `^`: 현재 줄의 첫 글자로 이동
- `-`: 위 줄로 이동
- `+`: 아래 줄로 이동
- `H`: 화면 최상단 행 이동
- `M`: 화면 중간 행 이동
- `L`: 화면 최하단 행 이동

> 💡 초창기 UNIX vi는 화살표 키를 지원하지 않았지만, 리눅스 vi는 화살표 이동 지원.

### 4-2. 화면 이동
- `Ctrl + f`: 한 화면 앞으로
- `Ctrl + b`: 한 화면 뒤로
- `Ctrl + d`: 반 화면 앞으로
- `Ctrl + u`: 반 화면 뒤로
- `Page Up`, `Page Down`도 사용 가능.

### 4-3. 특정 행 이동
- `50G`: 50번째 행으로 이동
- `30[Enter]`: 30번째 행으로 이동
- `$`: 파일의 마지막 행으로 이동

---

## 5. 텍스트 수정

### 5-1. 한 글자 수정 (r 명령)
- 수정하려는 글자 위에 커서를 놓고 `r` 입력 후 새로운 글자 입력.
- 수정 후에도 명령 모드를 유지함 (따로 `Esc` 누를 필요 없음).

### 5-2. 단어 수정 (cw, #s 명령)
- `cw`: 현재 커서가 위치한 단어를 지우고 입력 모드로 전환.
- `#s`: 글자 수를 지정하여 수정 (ex. `5s` → 다섯 글자 수정).

> 💡 단어 구분은 공백이나 특수문자로 이루어짐.

### 5-3. 행 단위 수정 (C, cc 명령)
- `C`: 현재 커서 위치부터 행 끝까지 삭제하고 입력 모드로 전환.
- `cc`: 현재 행 전체를 삭제하고 입력 모드로 전환.

---

## 6. 내용 삭제

### 6-1. 글자 삭제 (x, nx 명령)
- `x`: 커서 위치의 한 글자 삭제.
- `3x`: 커서 위치부터 세 글자 삭제.

### 6-2. 단어 삭제 (dw)
- `dw`: 현재 커서 위치부터 단어 끝까지 삭제.

### 6-3. 행 삭제 (dd)
- `dd`: 현재 커서가 위치한 **전체 행 삭제**.
- `3dd`: 현재 행 포함하여 총 3개 행 삭제.

> 💡 `D`: 현재 커서 위치부터 행 끝까지 삭제.

---

## 7. 명령 취소

### 7-1. u (Undo) 단일 명령 취소
- 직전에 실행한 명령을 취소함.

### 7-2. U (행 전체 복구)
- 현재 행에서 이루어진 **모든 변경사항을 복구**.

---

## 8. 복사 및 붙여넣기

### 8-1. 복사 (yy, nyy)
- `yy`: 현재 커서 위치 행 복사.
- `2yy`: 현재 행 포함 2개 행 복사.

### 8-2. 잘라내기 (dd)
- `dd`: 현재 커서 위치 행 삭제 (잘라내기).

### 8-3. 붙여넣기 (p, P)
- `p`: 현재 커서 다음 줄에 붙여넣기.
- `P`: 현재 커서 위에 붙여넣기.

### 8-4. 네임드 버퍼 사용
- 복사 또는 잘라낸 내용을 **버퍼에 이름을 붙여 저장 가능**.
- `"a yy`: 'a' 버퍼에 현재 행 복사.
- `"a p`: 'a' 버퍼 내용 붙여넣기.

> 💡 a ~ z까지 26개의 네임드 버퍼를 사용할 수 있음.

### 8-5. 마지막 행 모드에서 복사/붙이기
- 범위 지정 후 복사/삭제 가능.
  - `:2,3d` → 2행부터 3행 삭제
  - `:2pu` → 2행 다음에 붙이기
  - `:1,2y` → 1~2행 복사
  - `:4pu` → 4행 다음에 붙이기

---

## 9. 검색 및 바꾸기

### 9-1. 문자열 검색
- `/문자열`: 커서 이후 방향으로 문자열 검색.
- `?문자열`: 커서 이전 방향으로 문자열 검색.
- `n`: 같은 방향으로 다음 결과 검색.
- `N`: 반대 방향으로 결과 검색.

### 9-2. 문자열 바꾸기
- `:s/old/new/`: 현재 행에서 첫 번째 old를 new로 교체.
- `:s/old/new/g`: 현재 행에서 모든 old를 new로 교체.
- `:3,4s/old/new/`: 3~4행에서 첫 번째 old를 new로 교체.
- `:%s/old/new/g`: 파일 전체에서 old를 new로 교체.

> 💡 `%`는 전체 파일을 의미.  
> 💡 `g`는 한 행 내 모든 발생을 교체한다는 의미.

---

## 10. 기타 유용한 명령어

### 10-1. 다른 파일 읽어오기 (:r 파일명)
- `:r 파일명`: 현재 열려 있는 파일에 다른 파일 내용을 삽입.
- 예시:  
  - 커서를 원하는 위치로 이동 후  
  - `:r exec2.txt` → exec2.txt의 내용을 현재 파일에 삽입.

### 10-2. 다른 파일 편집 (:e 파일명)
- `:e 파일명`: 현재 파일을 닫고 다른 파일을 새로 편집.
- 주의사항: 저장하지 않으면 경고 메시지가 뜬다.

### 10-3. 셸 명령어 실행 (:! 명령어)
- `:! 명령어`: vi를 종료하지 않고 터미널 명령 실행.
- 예시: `:! ls` → 현재 디렉터리 파일 목록 표시.

### 10-4. 화면 다시 출력 (Ctrl+l)
- 시스템 메시지나 화면 깨짐 현상 발생 시 `Ctrl+l`을 눌러 화면을 깨끗하게 다시 그림.

### 10-5. 행 연결 (J)
- 현재 커서가 있는 행과 바로 아래 행을 하나로 연결.
- 연결 시 공백 하나 삽입됨.

### 10-6. 마지막 명령 반복 (.)
- 직전에 실행한 편집 명령을 반복 수행.
- (커서 이동은 반복되지 않음)

### 10-7. 대소문자 전환 (~)
- 커서 위치의 글자를 대문자 ↔ 소문자 변환.

---

## 11. VI 환경 설정

### 11-1. 행 번호 표시
- `:set nu`: 각 행 앞에 번호를 표시.
- `:set nonu`: 행 번호 숨기기.

### 11-2. 특수문자 표시
- `:set list`: 탭, 줄바꿈 등 특수문자 시각화.

### 11-3. 현재 설정 보기
- `:set`: 현재 적용된 vi 설정 일부 보기.
- `:set all`: 모든 설정 항목과 값을 보기.

### 11-4. .exrc 파일을 통한 설정
- 사용자 홈 디렉토리에 `.exrc` 파일 생성하여 vi 환경설정 지속 적용 가능.
- 예시:  
  ```bash
  set nu
  set list

### 11-5. EXINIT 환경변수 설정

- EXINIT은 vi 편집기의 초기 환경을 저장할 수 있는 **셸 환경 변수**다.
- `.exrc` 파일을 만들지 않고 vi 환경을 설정할 수 있다.

#### 설정 방법 (bash 기준)

```bash
export EXINIT="set nu"
```

#### 여러 옵션 적용 예

```bash
export EXINIT="set nu ai"
```

#### 지속적 적용을 위한 설정 (.bashrc에 추가)

```bash
echo 'export EXINIT="set nu ai"' >> ~/.bashrc
source ~/.bashrc
```

---

## 12. VI 실습 예제

### 12-1. 기본 폴더 및 파일 생성
- `/home/[계정]/Ex/TestVI/` 폴더 생성.
- gedit 또는 vi로 `exec.txt`, `exec2.txt`, `exec3.txt` 파일 생성.

### 12-2. 입력/수정/삭제 실습
1. `vi exec.txt` 실행
2. `i` → 입력 모드 전환 후 텍스트 입력
3. `Esc` → 명령 모드 전환 후 `:w` 저장
4. `cw`, `r`, `C`, `cc` → 수정
5. `x`, `dw`, `dd` → 삭제
6. `u`, `U` → 취소 및 복원

### 12-3. 복사/붙이기/검색/바꾸기 실습
- `yy`, `2yy`, `"a yy`, `"a p` 등으로 복사/붙여넣기
- `/문자열`, `?문자열`, `n`, `N` → 검색
- `:%s/old/new/g`, `:3,5s/a/b/g` → 바꾸기

### 12-4. 기타 명령어 실습
- `:r 파일명` → 다른 파일 내용 삽입
- `:e 파일명` → 다른 파일로 전환
- `:! ls` → 셸 명령 실행
- `J` → 행 연결
- `~` → 대소문자 변환
- `Ctrl + l` → 화면 리프레시

---

## 13. 요약 정리

| 기능 | 명령어 |
|------|--------|
| 저장 및 종료 | `:w`, `:q`, `:wq`, `:q!`, `ZZ` |
| 모드 전환 | 입력 모드: `i`, `a`, `o` / 명령 모드: `Esc` |
| 이동 | `h`, `j`, `k`, `l`, `w`, `b`, `G`, `$`, `^` |
| 수정 | `r`, `cw`, `s`, `C`, `cc` |
| 삭제 | `x`, `dw`, `dd`, `D` |
| 복사 및 붙여넣기 | `yy`, `nyy`, `p`, `P`, `"a yy`, `"ap` |
| 검색 | `/문자열`, `n`, `N` |
| 치환 | `:s/old/new/`, `:%s/old/new/g` |
| 환경 설정 | `:set nu`, `.exrc`, `EXINIT` |
| 기타 명령 | `J`, `.`, `~`, `:!`, `:r`, `:e` |